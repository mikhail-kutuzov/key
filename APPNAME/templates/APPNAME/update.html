<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <title>update pass</title>
    <link rel="stylesheet" href="{% static 'APPNAME/main.css'%}">
</head>
<body>
    <div class="form">
        <div class="form-toggle"></div>
        <div class="form-panel one">
        <img src="{{icon}}" alt="logo of site" width="80px">  <!--added by me-->
          <div class="form-header">
            <h2 style="font-weight:100; font-family: Verdana, Geneva, Tahoma, sans-serif;">Change Credentials for:</h2>
            <h3 style="font-weight:100; font-family: Verdana, Geneva, Tahoma, sans-serif; color:#2196F3;">{{site}}</h3>
          </div>
          <div class="form-content">
            <form action="{% url 'updater' %}" method="POST">
                {% csrf_token %}
              <div class="form-group">
                <label for="username">Email</label>
                <input type="text" id="username" name="newmail" value="{{oldmail}}" required="required"/>
              </div>
              <div class="form-group">
                <label for="password">Current Password</label>
                <input type="password" id="id_password" name="password" value ="{{oldpass}}"/>
                <img src="{% static 'APPNAME/icons/eye.png' %}" width="4.8%" height="4%" style="margin-left: -40%;margin-top: 2%;display:inline;vertical-align:middle" id="togglePassword">
              </div>
              <div class="form-group">
                <label for="password">New Password</label>
                <input type="password" id="password" name="newpass" required="required"/>
                <img src="{% static 'APPNAME/icons/eye.png' %}" width="4.8%" height="4%" style="margin-left:-40%;margin-top: 2%;display:inline;vertical-align: middle;" id="toggle">
              </div>
              <input type="text" hidden="true" name="user" value="{{curusr}}">
              <input type="text" hidden="true" name="site" value="{{site}}">
              <input type="text" hidden="true" name="ikon" value="{{icon}}">
              <div class="form-group">
                <button type="submit" name ="changer" id="upd">Update</button>
              </div>
            </form>
          </div>
        </div>

       <script>
        //const opwhite="https://cdn-user-icons.flaticon.com/69092/69092125/1658075217094.svg?token=exp=1658076133~hmac=721d2b75ca5283438fa3cd0a19376bb4"
        const openr = "{% static 'APPNAME/icons/eye.png' %}";
        const closer = "{% static 'APPNAME/icons/close.png' %}";
        const togglePassword = document.querySelector('#togglePassword');
        const password = document.querySelector('#id_password');
  
        togglePassword.addEventListener('click', function (e) {
  
        // Toggle the type attribute
          if( password.getAttribute('type')=='password'){
            password.setAttribute('type', 'text');
            togglePassword.src=closer;
          }
          else{
            password.setAttribute('type', 'password');
            togglePassword.src=openr;
          }
    });
        
        const toggle = document.querySelector('#toggle');
        const pass = document.querySelector('#password');
  
        toggle.addEventListener('click', function (e) {

          if( pass.getAttribute('type')=='password'){
            pass.setAttribute('type', 'text');
            toggle.src=closer;
          }
          else{
            pass.setAttribute('type', 'password');
            toggle.src=openr;
          }
    });

        </script>
</body>
</html>
